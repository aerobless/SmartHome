{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome \u00b6 Hi there \ud83d\udc4b and welcome to my Smart Home documentation! I've set up this page to document my own setup and also to share some of my findings, configuration hints and automations. Although there's a vast community of fellow Smart Home enthusiasts it can still be hard to get started. I'm trying to make this a bit easier with this site. If you've got any input, have questions or otherwise get stuck feel free to leave a comment \ud83d\ude04 or hit me up on twitter @eletiy Quickstart \u00b6 Screenshots of the UI Hardware Automations","title":"Home"},{"location":"#welcome","text":"Hi there \ud83d\udc4b and welcome to my Smart Home documentation! I've set up this page to document my own setup and also to share some of my findings, configuration hints and automations. Although there's a vast community of fellow Smart Home enthusiasts it can still be hard to get started. I'm trying to make this a bit easier with this site. If you've got any input, have questions or otherwise get stuck feel free to leave a comment \ud83d\ude04 or hit me up on twitter @eletiy","title":"Welcome"},{"location":"#quickstart","text":"Screenshots of the UI Hardware Automations","title":"Quickstart"},{"location":"automations/","text":"All of these automations are built in Node-RED . And they're automating devices configured in Home Assistant. Universal \u00b6 Vacuum the floor when I'm not home \u00b6 At 10am a check is executed whether the apartment is occupied or not. If it's not occupied the Roomba is triggered to start vacuuming the floor. If the apartment is occupied a notification is sent to me via Telegram to inform me that the cleaning cycle was not started. Node RED Flow [ { \"id\" : \"27f43369.1137ec\" , \"type\" : \"subflow\" , \"name\" : \"apartment occupied?\" , \"info\" : \"\" , \"category\" : \"\" , \"in\" : [ { \"x\" : 181.5 , \"y\" : 69 , \"wires\" : [ { \"id\" : \"cbbdb47d.a4ed48\" } ] } ], \"out\" : [ { \"x\" : 700 , \"y\" : 40 , \"wires\" : [ { \"id\" : \"1792a55d.ddc24b\" , \"port\" : 0 } ] }, { \"x\" : 700 , \"y\" : 90 , \"wires\" : [ { \"id\" : \"1792a55d.ddc24b\" , \"port\" : 1 } ] } ], \"outputLabels\" : [ \"clear\" , \"occupied\" ] }, { \"id\" : \"cbbdb47d.a4ed48\" , \"type\" : \"api-current-state\" , \"z\" : \"27f43369.1137ec\" , \"name\" : \"apartment occupancy\" , \"server\" : \"78fe396.483dac8\" , \"outputs\" : 1 , \"halt_if\" : \"\" , \"halt_if_type\" : \"str\" , \"halt_if_compare\" : \"is\" , \"override_topic\" : true , \"entity_id\" : \"binary_sensor.apartment_occupancy\" , \"state_type\" : \"habool\" , \"override_payload\" : true , \"override_data\" : true , \"x\" : 361.5 , \"y\" : 69 , \"wires\" : [ [ \"1792a55d.ddc24b\" ] ] }, { \"id\" : \"1792a55d.ddc24b\" , \"type\" : \"switch\" , \"z\" : \"27f43369.1137ec\" , \"name\" : \"is occupied?\" , \"property\" : \"payload\" , \"propertyType\" : \"msg\" , \"rules\" : [ { \"t\" : \"false\" }, { \"t\" : \"true\" } ], \"checkall\" : \"true\" , \"repair\" : false , \"outputs\" : 2 , \"x\" : 554.5 , \"y\" : 69 , \"wires\" : [ [], [] ] }, { \"id\" : \"74556465.5e1fac\" , \"type\" : \"api-call-service\" , \"z\" : \"d3ff7562.eebf38\" , \"name\" : \"Roomba ON\" , \"server\" : \"78fe396.483dac8\" , \"version\" : 1 , \"debugenabled\" : false , \"service_domain\" : \"vacuum\" , \"service\" : \"start\" , \"entityId\" : \"vacuum.ghost\" , \"data\" : \"\" , \"dataType\" : \"json\" , \"mergecontext\" : \"\" , \"output_location\" : \"payload\" , \"output_location_type\" : \"msg\" , \"mustacheAltTags\" : false , \"x\" : 570 , \"y\" : 40 , \"wires\" : [ [] ] }, { \"id\" : \"d5a40336.045ed\" , \"type\" : \"inject\" , \"z\" : \"d3ff7562.eebf38\" , \"name\" : \"10am weekdays\" , \"repeat\" : \"\" , \"crontab\" : \"00 10 * * 1,2,3,4,5\" , \"once\" : false , \"onceDelay\" : 0.1 , \"topic\" : \"\" , \"payload\" : \"true\" , \"payloadType\" : \"bool\" , \"x\" : 144.5 , \"y\" : 60 , \"wires\" : [ [ \"b816139a.b3f9e\" ] ] }, { \"id\" : \"b816139a.b3f9e\" , \"type\" : \"subflow:27f43369.1137ec\" , \"z\" : \"d3ff7562.eebf38\" , \"name\" : \"\" , \"x\" : 360 , \"y\" : 60 , \"wires\" : [ [ \"74556465.5e1fac\" ], [ \"b94a88b0.eff1c8\" ] ] }, { \"id\" : \"b94a88b0.eff1c8\" , \"type\" : \"api-call-service\" , \"z\" : \"d3ff7562.eebf38\" , \"name\" : \"Telegram Log\" , \"server\" : \"78fe396.483dac8\" , \"version\" : \"1\" , \"debugenabled\" : false , \"service_domain\" : \"telegram_bot\" , \"service\" : \"send_message\" , \"entityId\" : \"\" , \"data\" : \"{ \\\" message \\\" : \\\" Not launching Roomba because someone's home \\\" }\" , \"dataType\" : \"json\" , \"mergecontext\" : \"\" , \"output_location\" : \"payload\" , \"output_location_type\" : \"msg\" , \"mustacheAltTags\" : false , \"x\" : 570 , \"y\" : 80 , \"wires\" : [ [] ] }, { \"id\" : \"78fe396.483dac8\" , \"type\" : \"server\" , \"name\" : \"Home Assistant\" , \"legacy\" : false , \"addon\" : true , \"rejectUnauthorizedCerts\" : true , \"ha_boolean\" : \"y|yes|true|on|home|open\" , \"connectionDelay\" : true , \"cacheJson\" : true } ] Lights \u00b6 Kitchen Overhead Light \u00b6 If motion is detected at the sink, the kitchen overhead light is turned on. At the same time a timer is set for 3mins. If further motion is detected the timer is reset. If no more motion occurs and the timer runs out the light is turned off again. Shelly Light Switches \u00b6 To prevent the hue lights from being turned off fully I've added a Shelly controller behind each light switch. This detaches the switch from turn on/off the power and instead sends a MQTT messages to Home Assistant that the button was pressed. So in order for some of the light switches to actually turn on/off lights there needs to be a really simple automation connecting the action of pressing the switch with some lights that can be controlled. Another advantage of this system is that I've got light switches to spare for other functions. Since for example in the living room I'm happy with turning on/off all the lights at the same time. So of 4 switches I only need one to control the lights and can use the others e.g. to set a specific scene or turn on the radio. Bathroom Light \u00b6 My bathroom light is dumb, so it's controlled via power on/off of the shelly switch. For that reason and because of some edge cases there's a bit more logic behind this automation.. There's a few requirements behind this automation. The light turns on automatically with motion detection. But I don't want to be blinded a night, since it's a dumb light it can't do dimming, so the light should only turn on during certain times (06:20-22:00 during the week or 08:00-22:00 on a weekend). But if I'm up late it should still turn on automatically, so I've added the condition that if the kitchen light is already on, it's probably fine to turn on the bathroom light as well and not check the time condition. But then there was another problem. Since it's a dumb light tube it's a bit slow to turn on. This could result in user error. E.g. the motion detector triggers the light to turn on but the user thinks it didn't work or doesn't know about the motion detector and presses the button. Now the light turns off again and the user wonders why the button didn't work. So to fix this behavior I've added a locking logic that blocks further commands for 2 seconds if the light has been turned on via the button or motion detection. Devices \u00b6 Washing machine/dryer has finished \u00b6 If the washing machine or dryer finishes their work a push notification is sent to my phone and Google Home announces that the washer or dryer has finished. That washing/drying has finished is detected via the power consumption of the respective device with a MyStrom switch. The push notification is sent via the Home Assistant App on my phone. The Google Home announcement uses TTS (text to speech) and Chromecast functionality. Template sensor to detect if the washing machine is on/off: binary_sensor : - platform : template sensors : washingmachine_state : friendly_name : \"Washing Machine State\" delay_off : # Only switches states after new state existed for x minutes minutes : 3 icon_template : mdi:washing-machine value_template : \"{{ states.switch.mystrom_washingmachine.attributes.current_power_w | default(0) |float > 10}}\" Push Notification { \"title\" : \"Washing Machine done \ud83d\udc55\" , \"message\" : \"Don't wait for your clothes to wrinkle!\" } Turn off the charging station \u00b6 I've set up a charging station for various camera batteries, drone, battery pack etc. To prevent them from being charged constantly I've set up a myStrom switch that is turned off after 5h. So if I plan on going somewhere where I need a fully charged battery in one of these devices I can simply say \"Okay Google turn on the charging station\" and forget about it. It's quite simple but very convenient. TV & Entertainment \u00b6 iOS TV Remote \u00b6 iOS has a virtual TV remote in the control center. This remote can be used to control Apple TVs but also Homekit-compatible TVs of other manufacturers. Since my TV doesn't support Homekit natively I wanted to recreate this feature using a Logitech IR blaster that sends the remote control commands to the TV. Samsung TV playing nice with the native iOS remote utility \ud83d\ude04 - of course using @home_assistant for the integration. The commands are sent over IR so really any TV could be added like this pic.twitter.com/tehkkdGzei \u2014 Theo Winter (@eletiy) July 9, 2020 So what it does is listen to homekit_tv_remote_key_pressed events, check that they're for the correct TV and then map them to the individual IR blaster commands. E.g. payload.event.key_name = arrow_left maps to remote.send_command with the following payload: { \"device\" : \"Samsung TV\" , \"command\" : [ \"DirectionLeft\" ] } TV App Launcher \u00b6 This one is a bit of a monster. Basically what it allows is to have a Channel selector drop down in the frontend where you can choose the App that should be launched/switch to on the TV. As an added benefit this also work with Google Home. So I can say stuff like: \"Okay Google switch to [ PlayStation /Apple TV/Netflix/...]\" The REST APIs of the TV are shit.. they allow some things but not all - so this is automation is a mixture of REST calls and IR commands. You may be wondering why use the REST APIs at all? Since the TV menu is basically a list of apps, the REST API allows me to jump to a \"safe\" point in that list. For example I can launch YouTube over the REST Api. I know that I've placed YouTube as the first App, so now I can use IR commands to move 2 positions to the right and for example launch Spotify. If I didn't have the REST command there'd be no way for me to know which App is open at the moment and navigate the menu. In case you're wondering about the Apple TV Wallpaper path. It's a hacky way to force Apple TV to show the screensaver immediately. The screensaver shows flyovers of major cities all over the world and it's nice to have on as a bit of decoration/art.","title":"Automations"},{"location":"automations/#universal","text":"","title":"Universal"},{"location":"automations/#vacuum-the-floor-when-im-not-home","text":"At 10am a check is executed whether the apartment is occupied or not. If it's not occupied the Roomba is triggered to start vacuuming the floor. If the apartment is occupied a notification is sent to me via Telegram to inform me that the cleaning cycle was not started. Node RED Flow [ { \"id\" : \"27f43369.1137ec\" , \"type\" : \"subflow\" , \"name\" : \"apartment occupied?\" , \"info\" : \"\" , \"category\" : \"\" , \"in\" : [ { \"x\" : 181.5 , \"y\" : 69 , \"wires\" : [ { \"id\" : \"cbbdb47d.a4ed48\" } ] } ], \"out\" : [ { \"x\" : 700 , \"y\" : 40 , \"wires\" : [ { \"id\" : \"1792a55d.ddc24b\" , \"port\" : 0 } ] }, { \"x\" : 700 , \"y\" : 90 , \"wires\" : [ { \"id\" : \"1792a55d.ddc24b\" , \"port\" : 1 } ] } ], \"outputLabels\" : [ \"clear\" , \"occupied\" ] }, { \"id\" : \"cbbdb47d.a4ed48\" , \"type\" : \"api-current-state\" , \"z\" : \"27f43369.1137ec\" , \"name\" : \"apartment occupancy\" , \"server\" : \"78fe396.483dac8\" , \"outputs\" : 1 , \"halt_if\" : \"\" , \"halt_if_type\" : \"str\" , \"halt_if_compare\" : \"is\" , \"override_topic\" : true , \"entity_id\" : \"binary_sensor.apartment_occupancy\" , \"state_type\" : \"habool\" , \"override_payload\" : true , \"override_data\" : true , \"x\" : 361.5 , \"y\" : 69 , \"wires\" : [ [ \"1792a55d.ddc24b\" ] ] }, { \"id\" : \"1792a55d.ddc24b\" , \"type\" : \"switch\" , \"z\" : \"27f43369.1137ec\" , \"name\" : \"is occupied?\" , \"property\" : \"payload\" , \"propertyType\" : \"msg\" , \"rules\" : [ { \"t\" : \"false\" }, { \"t\" : \"true\" } ], \"checkall\" : \"true\" , \"repair\" : false , \"outputs\" : 2 , \"x\" : 554.5 , \"y\" : 69 , \"wires\" : [ [], [] ] }, { \"id\" : \"74556465.5e1fac\" , \"type\" : \"api-call-service\" , \"z\" : \"d3ff7562.eebf38\" , \"name\" : \"Roomba ON\" , \"server\" : \"78fe396.483dac8\" , \"version\" : 1 , \"debugenabled\" : false , \"service_domain\" : \"vacuum\" , \"service\" : \"start\" , \"entityId\" : \"vacuum.ghost\" , \"data\" : \"\" , \"dataType\" : \"json\" , \"mergecontext\" : \"\" , \"output_location\" : \"payload\" , \"output_location_type\" : \"msg\" , \"mustacheAltTags\" : false , \"x\" : 570 , \"y\" : 40 , \"wires\" : [ [] ] }, { \"id\" : \"d5a40336.045ed\" , \"type\" : \"inject\" , \"z\" : \"d3ff7562.eebf38\" , \"name\" : \"10am weekdays\" , \"repeat\" : \"\" , \"crontab\" : \"00 10 * * 1,2,3,4,5\" , \"once\" : false , \"onceDelay\" : 0.1 , \"topic\" : \"\" , \"payload\" : \"true\" , \"payloadType\" : \"bool\" , \"x\" : 144.5 , \"y\" : 60 , \"wires\" : [ [ \"b816139a.b3f9e\" ] ] }, { \"id\" : \"b816139a.b3f9e\" , \"type\" : \"subflow:27f43369.1137ec\" , \"z\" : \"d3ff7562.eebf38\" , \"name\" : \"\" , \"x\" : 360 , \"y\" : 60 , \"wires\" : [ [ \"74556465.5e1fac\" ], [ \"b94a88b0.eff1c8\" ] ] }, { \"id\" : \"b94a88b0.eff1c8\" , \"type\" : \"api-call-service\" , \"z\" : \"d3ff7562.eebf38\" , \"name\" : \"Telegram Log\" , \"server\" : \"78fe396.483dac8\" , \"version\" : \"1\" , \"debugenabled\" : false , \"service_domain\" : \"telegram_bot\" , \"service\" : \"send_message\" , \"entityId\" : \"\" , \"data\" : \"{ \\\" message \\\" : \\\" Not launching Roomba because someone's home \\\" }\" , \"dataType\" : \"json\" , \"mergecontext\" : \"\" , \"output_location\" : \"payload\" , \"output_location_type\" : \"msg\" , \"mustacheAltTags\" : false , \"x\" : 570 , \"y\" : 80 , \"wires\" : [ [] ] }, { \"id\" : \"78fe396.483dac8\" , \"type\" : \"server\" , \"name\" : \"Home Assistant\" , \"legacy\" : false , \"addon\" : true , \"rejectUnauthorizedCerts\" : true , \"ha_boolean\" : \"y|yes|true|on|home|open\" , \"connectionDelay\" : true , \"cacheJson\" : true } ]","title":"Vacuum the floor when I'm not home"},{"location":"automations/#lights","text":"","title":"Lights"},{"location":"automations/#kitchen-overhead-light","text":"If motion is detected at the sink, the kitchen overhead light is turned on. At the same time a timer is set for 3mins. If further motion is detected the timer is reset. If no more motion occurs and the timer runs out the light is turned off again.","title":"Kitchen Overhead Light"},{"location":"automations/#shelly-light-switches","text":"To prevent the hue lights from being turned off fully I've added a Shelly controller behind each light switch. This detaches the switch from turn on/off the power and instead sends a MQTT messages to Home Assistant that the button was pressed. So in order for some of the light switches to actually turn on/off lights there needs to be a really simple automation connecting the action of pressing the switch with some lights that can be controlled. Another advantage of this system is that I've got light switches to spare for other functions. Since for example in the living room I'm happy with turning on/off all the lights at the same time. So of 4 switches I only need one to control the lights and can use the others e.g. to set a specific scene or turn on the radio.","title":"Shelly Light Switches"},{"location":"automations/#bathroom-light","text":"My bathroom light is dumb, so it's controlled via power on/off of the shelly switch. For that reason and because of some edge cases there's a bit more logic behind this automation.. There's a few requirements behind this automation. The light turns on automatically with motion detection. But I don't want to be blinded a night, since it's a dumb light it can't do dimming, so the light should only turn on during certain times (06:20-22:00 during the week or 08:00-22:00 on a weekend). But if I'm up late it should still turn on automatically, so I've added the condition that if the kitchen light is already on, it's probably fine to turn on the bathroom light as well and not check the time condition. But then there was another problem. Since it's a dumb light tube it's a bit slow to turn on. This could result in user error. E.g. the motion detector triggers the light to turn on but the user thinks it didn't work or doesn't know about the motion detector and presses the button. Now the light turns off again and the user wonders why the button didn't work. So to fix this behavior I've added a locking logic that blocks further commands for 2 seconds if the light has been turned on via the button or motion detection.","title":"Bathroom Light"},{"location":"automations/#devices","text":"","title":"Devices"},{"location":"automations/#washing-machinedryer-has-finished","text":"If the washing machine or dryer finishes their work a push notification is sent to my phone and Google Home announces that the washer or dryer has finished. That washing/drying has finished is detected via the power consumption of the respective device with a MyStrom switch. The push notification is sent via the Home Assistant App on my phone. The Google Home announcement uses TTS (text to speech) and Chromecast functionality. Template sensor to detect if the washing machine is on/off: binary_sensor : - platform : template sensors : washingmachine_state : friendly_name : \"Washing Machine State\" delay_off : # Only switches states after new state existed for x minutes minutes : 3 icon_template : mdi:washing-machine value_template : \"{{ states.switch.mystrom_washingmachine.attributes.current_power_w | default(0) |float > 10}}\" Push Notification { \"title\" : \"Washing Machine done \ud83d\udc55\" , \"message\" : \"Don't wait for your clothes to wrinkle!\" }","title":"Washing machine/dryer has finished"},{"location":"automations/#turn-off-the-charging-station","text":"I've set up a charging station for various camera batteries, drone, battery pack etc. To prevent them from being charged constantly I've set up a myStrom switch that is turned off after 5h. So if I plan on going somewhere where I need a fully charged battery in one of these devices I can simply say \"Okay Google turn on the charging station\" and forget about it. It's quite simple but very convenient.","title":"Turn off the charging station"},{"location":"automations/#tv-entertainment","text":"","title":"TV &amp; Entertainment"},{"location":"automations/#ios-tv-remote","text":"iOS has a virtual TV remote in the control center. This remote can be used to control Apple TVs but also Homekit-compatible TVs of other manufacturers. Since my TV doesn't support Homekit natively I wanted to recreate this feature using a Logitech IR blaster that sends the remote control commands to the TV. Samsung TV playing nice with the native iOS remote utility \ud83d\ude04 - of course using @home_assistant for the integration. The commands are sent over IR so really any TV could be added like this pic.twitter.com/tehkkdGzei \u2014 Theo Winter (@eletiy) July 9, 2020 So what it does is listen to homekit_tv_remote_key_pressed events, check that they're for the correct TV and then map them to the individual IR blaster commands. E.g. payload.event.key_name = arrow_left maps to remote.send_command with the following payload: { \"device\" : \"Samsung TV\" , \"command\" : [ \"DirectionLeft\" ] }","title":"iOS TV Remote"},{"location":"automations/#tv-app-launcher","text":"This one is a bit of a monster. Basically what it allows is to have a Channel selector drop down in the frontend where you can choose the App that should be launched/switch to on the TV. As an added benefit this also work with Google Home. So I can say stuff like: \"Okay Google switch to [ PlayStation /Apple TV/Netflix/...]\" The REST APIs of the TV are shit.. they allow some things but not all - so this is automation is a mixture of REST calls and IR commands. You may be wondering why use the REST APIs at all? Since the TV menu is basically a list of apps, the REST API allows me to jump to a \"safe\" point in that list. For example I can launch YouTube over the REST Api. I know that I've placed YouTube as the first App, so now I can use IR commands to move 2 positions to the right and for example launch Spotify. If I didn't have the REST command there'd be no way for me to know which App is open at the moment and navigate the menu. In case you're wondering about the Apple TV Wallpaper path. It's a hacky way to force Apple TV to show the screensaver immediately. The screensaver shows flyovers of major cities all over the world and it's nice to have on as a bit of decoration/art.","title":"TV App Launcher"},{"location":"hardware/","text":"Hardware \u00b6 These are all the smart devices I'm currently using. They're grouped into rough categories which you can see on the left. Below you can see a simplified diagram of how everything works together. The differently colored lines signify different modes of communication, such as wifi, ethernet, ZigBee and so on.","title":"Overview"},{"location":"hardware/#hardware","text":"These are all the smart devices I'm currently using. They're grouped into rough categories which you can see on the left. Below you can see a simplified diagram of how everything works together. The differently colored lines signify different modes of communication, such as wifi, ethernet, ZigBee and so on.","title":"Hardware"},{"location":"hardware/blinds/","text":"KNX Controller 9x Aktor MGX-9 \u00b6 The KNX blinds controller is pre-installed in the apartment. One thing I learned about KNX is that you can't download an existing configuration of a controller. You can just overwrite it. This has led to some issues where the building couldn't control the blinds anymore once I wrote my own configuration onto the controller. Luckily I was able to get the source files for the original configuration from a technician and add my own KNX addresses to it. So now the building can still lock my blinds for maintenance or high winds but I can also control them via Home Assistant. KNX devices are configured with ETS which is available for free for personal use (up to 5 devices). KNX IP Interface 731 \u00b6 This device is a interface between the KNX TP (twisted pair) and ethernet. It allows Home Assistant to communicate with the KNX controller controlling the blinds in my apartment. It fits in a DIN-bracket and draws power directly from the KNX bus.","title":"Blinds"},{"location":"hardware/blinds/#knx-controller-9x-aktor-mgx-9","text":"The KNX blinds controller is pre-installed in the apartment. One thing I learned about KNX is that you can't download an existing configuration of a controller. You can just overwrite it. This has led to some issues where the building couldn't control the blinds anymore once I wrote my own configuration onto the controller. Luckily I was able to get the source files for the original configuration from a technician and add my own KNX addresses to it. So now the building can still lock my blinds for maintenance or high winds but I can also control them via Home Assistant. KNX devices are configured with ETS which is available for free for personal use (up to 5 devices).","title":"KNX Controller 9x Aktor MGX-9"},{"location":"hardware/blinds/#knx-ip-interface-731","text":"This device is a interface between the KNX TP (twisted pair) and ethernet. It allows Home Assistant to communicate with the KNX controller controlling the blinds in my apartment. It fits in a DIN-bracket and draws power directly from the KNX bus.","title":"KNX IP Interface 731"},{"location":"hardware/computers/","text":"Intel NUC Baby Canyon NUC7i3BNH \u00b6 The brains of my whole Smart Home setup. It's sporting a Intel i3-7100U CPU clocking 2.4 GHz, 2x 8GB DDR-4 Ram and an Intel 545 256GB SSD. As for software it's running Ubuntu 18.04 LTS, Docker and most importantly Home Assistant. I'm currently running Home Assistant as a supervised installation (HA Core + Supervisor). Raspberry PI Zero \u00b6 Just a Raspberry Pi Zero running a headless Raspbian image. I use it as a BLE to MQTT gateway for the Xiaomi Flower Care sensors in my loggia. When triggered it will poll all the Flower Care sensors and forward their values over MQTT.","title":"Computers"},{"location":"hardware/computers/#intel-nuc-baby-canyon-nuc7i3bnh","text":"The brains of my whole Smart Home setup. It's sporting a Intel i3-7100U CPU clocking 2.4 GHz, 2x 8GB DDR-4 Ram and an Intel 545 256GB SSD. As for software it's running Ubuntu 18.04 LTS, Docker and most importantly Home Assistant. I'm currently running Home Assistant as a supervised installation (HA Core + Supervisor).","title":"Intel NUC Baby Canyon NUC7i3BNH"},{"location":"hardware/computers/#raspberry-pi-zero","text":"Just a Raspberry Pi Zero running a headless Raspbian image. I use it as a BLE to MQTT gateway for the Xiaomi Flower Care sensors in my loggia. When triggered it will poll all the Flower Care sensors and forward their values over MQTT.","title":"Raspberry PI Zero"},{"location":"hardware/entertainment/","text":"Samsung QE65Q7F \u00b6 A smart tv. It connects to the internet over Ethernet or WiFi. It has some Web APIs but they're quite restricted and not fully finished.. e.g. you can switch between tv mode and the first hdmi source but not others.. so I've ended up automating it over IR commands sent via a Logitech Harmony Hub. Other then the bad API it's a good tv. It has apps for all the major streaming providers and it can also play 4k video from a computer or network share. Sony PS4 Pro \u00b6 A game console. It can be controlled by Home Assistant via ethernet/WiFi. Apple TV 4K 32GB \u00b6 I originally bought this as a way to expose Apple Homekit for remote access. However I've since stopped using Homekit almost entirely. It's still useful for casting photos & videos from an iOS device and to watch IPTV from Init7. Nvidia Shield TV \u00b6 I originally bought this because I thought Android TV was cool. I rarely use it. It serves as a Chromecast occasionally.. but that's really all there is to it.","title":"TV & Entertainment"},{"location":"hardware/entertainment/#samsung-qe65q7f","text":"A smart tv. It connects to the internet over Ethernet or WiFi. It has some Web APIs but they're quite restricted and not fully finished.. e.g. you can switch between tv mode and the first hdmi source but not others.. so I've ended up automating it over IR commands sent via a Logitech Harmony Hub. Other then the bad API it's a good tv. It has apps for all the major streaming providers and it can also play 4k video from a computer or network share.","title":"Samsung QE65Q7F"},{"location":"hardware/entertainment/#sony-ps4-pro","text":"A game console. It can be controlled by Home Assistant via ethernet/WiFi.","title":"Sony PS4 Pro"},{"location":"hardware/entertainment/#apple-tv-4k-32gb","text":"I originally bought this as a way to expose Apple Homekit for remote access. However I've since stopped using Homekit almost entirely. It's still useful for casting photos & videos from an iOS device and to watch IPTV from Init7.","title":"Apple TV 4K 32GB"},{"location":"hardware/entertainment/#nvidia-shield-tv","text":"I originally bought this because I thought Android TV was cool. I rarely use it. It serves as a Chromecast occasionally.. but that's really all there is to it.","title":"Nvidia Shield TV"},{"location":"hardware/lights/","text":"Philips Hue \u00b6 I use mostly Philips Hue light bulbs. They work well and are easily paired. Philips Hue Filament BT Philips Hue GU10 Spot Color BT Philips Hue E26 Color Nanoleaf Aurora \u00b6 A smart light consisting of triangle shaped LED panels. The panels can be arranged in any pattern desired. It can also be animated with or without music. The Nanoleaf connects to Home Assistant over WiFi.","title":"Lights"},{"location":"hardware/lights/#philips-hue","text":"I use mostly Philips Hue light bulbs. They work well and are easily paired. Philips Hue Filament BT Philips Hue GU10 Spot Color BT Philips Hue E26 Color","title":"Philips Hue"},{"location":"hardware/lights/#nanoleaf-aurora","text":"A smart light consisting of triangle shaped LED panels. The panels can be arranged in any pattern desired. It can also be animated with or without music. The Nanoleaf connects to Home Assistant over WiFi.","title":"Nanoleaf Aurora"},{"location":"hardware/locks/","text":"Nello One \u00b6 The Nello One is a interesting device. It's installed as a middle man between the buildings intercom/door opener system. It allows me to open the apartment buildings main door from my phone instead of with a key. The way it does this is by emulating a button press (door open) on the intercom device.","title":"Locks"},{"location":"hardware/locks/#nello-one","text":"The Nello One is a interesting device. It's installed as a middle man between the buildings intercom/door opener system. It allows me to open the apartment buildings main door from my phone instead of with a key. The way it does this is by emulating a button press (door open) on the intercom device.","title":"Nello One"},{"location":"hardware/miscellaneous/","text":"Kibernetik Air Conditioner \u00b6 A simple AC device. Can be controlled over infrared. I use the Logitech Harmony Hub to do this. iRobot Roomba 980 \u00b6 Smart vacuum robot that communicates over WiFi. It's actually running Linux and you can connect to it over SSH. I'm happy with it's cleaning capabilities. The vacuum is started from a schedule in Home Assistant but only when Home Assistant sees that I'm not home. Oral-B Elektro Genius 10100S \u00b6 Smart toothbrush that communicates over BLE. I haven't integrated this yet.. but it's on the list ;-)","title":"Miscellaneous"},{"location":"hardware/miscellaneous/#kibernetik-air-conditioner","text":"A simple AC device. Can be controlled over infrared. I use the Logitech Harmony Hub to do this.","title":"Kibernetik Air Conditioner"},{"location":"hardware/miscellaneous/#irobot-roomba-980","text":"Smart vacuum robot that communicates over WiFi. It's actually running Linux and you can connect to it over SSH. I'm happy with it's cleaning capabilities. The vacuum is started from a schedule in Home Assistant but only when Home Assistant sees that I'm not home.","title":"iRobot Roomba 980"},{"location":"hardware/miscellaneous/#oral-b-elektro-genius-10100s","text":"Smart toothbrush that communicates over BLE. I haven't integrated this yet.. but it's on the list ;-)","title":"Oral-B Elektro Genius 10100S"},{"location":"hardware/networking/","text":"Infrared \u00b6 Logitech Harmony Hub \u00b6 Logitech Harmony Hub is a infrared broadcast device that is accessed over wifi. It can be directly integrated into Home Assistant. From Home Assistant infrared codes can be sent to control various devices. In my setup I use it to control the TV, speakers and in summer the AC machine. ZigBee \u00b6 Dresden Elektronik ConBee Stick \u00b6 I use a Dresden Elektronik ConBee stick as ZigBee gateway for all of my ZigBee devices. The ConBee is a USB stick that's plugged directly into the Intel Nuc running Home Assistant. In Home Assistant I'm using the deCONZ addon for adding and configuring ZigBee devices. WiFi & Ethernet \u00b6 FRITZ!Box 5490 \u00b6 I'm using the Fritz!Box 5490 as router and DHCP server. This is the fiber version. It works well and it's easy to configure & manage static IPs which is something you have to do often in a well organized Smart Home setup. I'm not using the wifi-router functionality because it's not located ideally for spreading the wifi signal. I'm also not using any of Fritz!'s smart home features. Google Nest Wifi \u00b6 I use a single Google Nest Wifi as my access point. It provides fast wireless access at gigabit speeds and has various optimizations for multi-device access as well as future compatibility to BLE and Thread for smart home device integrations. Additionally it looks nice and can be placed openly which improves the spread of the wifi signal as well. I run my Nest Wifi in bridge mode, which means it's DHCP server functionality is disabled and it simply extends my LAN over wifi. Warning Beware that Google Nest Wifi does not support mesh networking in bridge mode. So if you're using a Fritz!Box or similar router for managing statics IPs you cannot run a Google Nest Wifi mesh network. This is a bit of a downside, so I would not recommend using this wifi router if you're planning to run a mesh network.","title":"Networking & Mesh"},{"location":"hardware/networking/#infrared","text":"","title":"Infrared"},{"location":"hardware/networking/#logitech-harmony-hub","text":"Logitech Harmony Hub is a infrared broadcast device that is accessed over wifi. It can be directly integrated into Home Assistant. From Home Assistant infrared codes can be sent to control various devices. In my setup I use it to control the TV, speakers and in summer the AC machine.","title":"Logitech Harmony Hub"},{"location":"hardware/networking/#zigbee","text":"","title":"ZigBee"},{"location":"hardware/networking/#dresden-elektronik-conbee-stick","text":"I use a Dresden Elektronik ConBee stick as ZigBee gateway for all of my ZigBee devices. The ConBee is a USB stick that's plugged directly into the Intel Nuc running Home Assistant. In Home Assistant I'm using the deCONZ addon for adding and configuring ZigBee devices.","title":"Dresden Elektronik ConBee Stick"},{"location":"hardware/networking/#wifi-ethernet","text":"","title":"WiFi &amp; Ethernet"},{"location":"hardware/networking/#fritzbox-5490","text":"I'm using the Fritz!Box 5490 as router and DHCP server. This is the fiber version. It works well and it's easy to configure & manage static IPs which is something you have to do often in a well organized Smart Home setup. I'm not using the wifi-router functionality because it's not located ideally for spreading the wifi signal. I'm also not using any of Fritz!'s smart home features.","title":"FRITZ!Box 5490"},{"location":"hardware/networking/#google-nest-wifi","text":"I use a single Google Nest Wifi as my access point. It provides fast wireless access at gigabit speeds and has various optimizations for multi-device access as well as future compatibility to BLE and Thread for smart home device integrations. Additionally it looks nice and can be placed openly which improves the spread of the wifi signal as well. I run my Nest Wifi in bridge mode, which means it's DHCP server functionality is disabled and it simply extends my LAN over wifi. Warning Beware that Google Nest Wifi does not support mesh networking in bridge mode. So if you're using a Fritz!Box or similar router for managing statics IPs you cannot run a Google Nest Wifi mesh network. This is a bit of a downside, so I would not recommend using this wifi router if you're planning to run a mesh network.","title":"Google Nest Wifi"},{"location":"hardware/nfc/","text":"Home Assistant Tag Reader \u00b6 I'm using a Home Assistant Tag reader to read various NFC tags. For example I have NFC cards for various light scenes that aren't used that frequently (e.g. party scene). I also plan on using this for Spotify playlists and other things that aren't so easily exposed in the physical world.","title":"NFC"},{"location":"hardware/nfc/#home-assistant-tag-reader","text":"I'm using a Home Assistant Tag reader to read various NFC tags. For example I have NFC cards for various light scenes that aren't used that frequently (e.g. party scene). I also plan on using this for Spotify playlists and other things that aren't so easily exposed in the physical world.","title":"Home Assistant Tag Reader"},{"location":"hardware/power-switches/","text":"Shelly \u00b6 Shelly's are tiny power switches that I've placed behind the actual light switches of my apartment. I mainly use them to detach the event of clicking a light-switch and turning the power of the light bulbs on/off. Since I use smart light bulbs (Philips Hue), the light bulbs need to be powered on all the time, otherwise they can't be controlled via Home Assistant, Google Home etc. This is where the Shellys come in real handy. They connect to Home Assistant via MQTT over WiFi and they can be configured in a way that pressing the actual light switch will simply send an MQTT event but not actually turn of the power of the light bulbs. Home Assistant can then decide what to do with the button press event. In some cases I turn on/off the lights, but in other cases I've re-used the light switch to do other things. Such as change light scene or turn on the radio. Shelly 1PM \u00b6 This shelly switches on power line / button. It also measure the power consumed. Shelly 2.5 \u00b6 This shelly switches two power lines / buttons. It also measures the power consumed. It could also be used to control electric blinds, but I don't use it for that. MyStrom Switch \u00b6 I have a bunch of MyStrom smart switches connected to all sorts of devices. I use them to control the connected devices, but also for automations. For example I use two of them to measure the power consumption of the washer & dryer. That data is then used to send a notification when the washer or dryer has finished and it's time to take out the clothes.","title":"Power Switches"},{"location":"hardware/power-switches/#shelly","text":"Shelly's are tiny power switches that I've placed behind the actual light switches of my apartment. I mainly use them to detach the event of clicking a light-switch and turning the power of the light bulbs on/off. Since I use smart light bulbs (Philips Hue), the light bulbs need to be powered on all the time, otherwise they can't be controlled via Home Assistant, Google Home etc. This is where the Shellys come in real handy. They connect to Home Assistant via MQTT over WiFi and they can be configured in a way that pressing the actual light switch will simply send an MQTT event but not actually turn of the power of the light bulbs. Home Assistant can then decide what to do with the button press event. In some cases I turn on/off the lights, but in other cases I've re-used the light switch to do other things. Such as change light scene or turn on the radio.","title":"Shelly"},{"location":"hardware/power-switches/#shelly-1pm","text":"This shelly switches on power line / button. It also measure the power consumed.","title":"Shelly 1PM"},{"location":"hardware/power-switches/#shelly-25","text":"This shelly switches two power lines / buttons. It also measures the power consumed. It could also be used to control electric blinds, but I don't use it for that.","title":"Shelly 2.5"},{"location":"hardware/power-switches/#mystrom-switch","text":"I have a bunch of MyStrom smart switches connected to all sorts of devices. I use them to control the connected devices, but also for automations. For example I use two of them to measure the power consumption of the washer & dryer. That data is then used to send a notification when the washer or dryer has finished and it's time to take out the clothes.","title":"MyStrom Switch"},{"location":"hardware/sensors/","text":"Xiaomi \u00b6 I have a lot of Xiaomi sensors. They're all paired to the Dresden Elektronik ConBee ZigBee stick. Xiaomi products are best bought on AliExpress although swiss retailers such as Galaxus now have them as well for a steep markup. The ZigBee sensors use the nearest cable-powered device to access the mesh network, so that the least bit of energy is needed. In my experience the battery life of their coin-cells last around 1-2years even for frequently used devices such as door sensors. The battery life is however a bit reduced if the sensor is exposed to the cold. My outside temperature sensor typically only lasts a few months. It probably also needs more energy since the signal has to pass through thick walls/insulated windows. The Xiaomi Flower Care sensors use BLE to report their values. Although Home Assistant provides a direct integration I cannot use it since my Home Assistant computer is too far away from where I've placed the sensors. So I'm using a Raspberry Pi Zero to collect the sensor values via BLE and then send them on the Home Assistant over MQTT. Name Description Sensors Communication Aqara Vibration Sensor Detects movement Vibration, Temperature ZigBee Aqara Temperature Sensor Reports temperature, humidity etc. Temperature, Humidity, Atmospheric Pressure ZigBee Xiaomi Flower Care Reports soil status. Water level, temperature, fertilizer BLE Aqara Door Sensor Detects door open/closed open/close ZigBee Withings Sleep \u00b6 It's main purpose is to record my sleep patterns and store them in Apple Health. However as an added benefit I can use it detect when the bed is occupied and e.g. automatically turn off lights. Netatmo Weatherstation \u00b6 One of the first devices I bought for my smart home. It consists of a indoor and outdoor weather station. Sadly the outdoor one has died after a few years.. but the indoor one is still going strong. Apart from the temperature it also reports the Carbon Dioxide levels which none of my other sensors do.","title":"Sensors"},{"location":"hardware/sensors/#xiaomi","text":"I have a lot of Xiaomi sensors. They're all paired to the Dresden Elektronik ConBee ZigBee stick. Xiaomi products are best bought on AliExpress although swiss retailers such as Galaxus now have them as well for a steep markup. The ZigBee sensors use the nearest cable-powered device to access the mesh network, so that the least bit of energy is needed. In my experience the battery life of their coin-cells last around 1-2years even for frequently used devices such as door sensors. The battery life is however a bit reduced if the sensor is exposed to the cold. My outside temperature sensor typically only lasts a few months. It probably also needs more energy since the signal has to pass through thick walls/insulated windows. The Xiaomi Flower Care sensors use BLE to report their values. Although Home Assistant provides a direct integration I cannot use it since my Home Assistant computer is too far away from where I've placed the sensors. So I'm using a Raspberry Pi Zero to collect the sensor values via BLE and then send them on the Home Assistant over MQTT. Name Description Sensors Communication Aqara Vibration Sensor Detects movement Vibration, Temperature ZigBee Aqara Temperature Sensor Reports temperature, humidity etc. Temperature, Humidity, Atmospheric Pressure ZigBee Xiaomi Flower Care Reports soil status. Water level, temperature, fertilizer BLE Aqara Door Sensor Detects door open/closed open/close ZigBee","title":"Xiaomi"},{"location":"hardware/sensors/#withings-sleep","text":"It's main purpose is to record my sleep patterns and store them in Apple Health. However as an added benefit I can use it detect when the bed is occupied and e.g. automatically turn off lights.","title":"Withings Sleep"},{"location":"hardware/sensors/#netatmo-weatherstation","text":"One of the first devices I bought for my smart home. It consists of a indoor and outdoor weather station. Sadly the outdoor one has died after a few years.. but the indoor one is still going strong. Apart from the temperature it also reports the Carbon Dioxide levels which none of my other sensors do.","title":"Netatmo Weatherstation"},{"location":"hardware/voice-assistants/","text":"Google Home \u00b6 I use Google Home to have voice controls for all my devices and as a digital assistant. Devices relevant for voice controls are exposed to Google Assistant via the Nabu Casa integration. In my apartment I've deployed 5 Google Home devices to reach 100% coverage of voice recognition in all rooms. In addition to voice control they also serve as smart speakers for playing music or notifications. Some of the commands I use most often: Okay Google ... [ open /close] the blinds turn [ all /the bedroom/the living room] lights [ on /off] play [ music /radio] [ ... /on everywhere] add [item] to the shopping list what's the temperature [ inside /outside]? turn off the tv Device Description Count Google Home The original Google Home. Has pretty good sound quality from multiple speakers. I have one placed near the computer desk and I use it to listen to music. 1 Google Home Mini This a small version of a Google Home, it has only one speaker. I have one in the bathroom, bedroom and loggia. They're decent enough to listen to music ocasionally. 3 Google Nest Hub This one is also a smart display. It can show receipts, timers, maps, youtube videos and more. I have one in the kitchen, it's ideal for cooking. Also nice to see the weather forecast for the whole week. It has a touch screen but I operate it only by voice 95% of the time. 1","title":"Voice Assistants"},{"location":"hardware/voice-assistants/#google-home","text":"I use Google Home to have voice controls for all my devices and as a digital assistant. Devices relevant for voice controls are exposed to Google Assistant via the Nabu Casa integration. In my apartment I've deployed 5 Google Home devices to reach 100% coverage of voice recognition in all rooms. In addition to voice control they also serve as smart speakers for playing music or notifications. Some of the commands I use most often: Okay Google ... [ open /close] the blinds turn [ all /the bedroom/the living room] lights [ on /off] play [ music /radio] [ ... /on everywhere] add [item] to the shopping list what's the temperature [ inside /outside]? turn off the tv Device Description Count Google Home The original Google Home. Has pretty good sound quality from multiple speakers. I have one placed near the computer desk and I use it to listen to music. 1 Google Home Mini This a small version of a Google Home, it has only one speaker. I have one in the bathroom, bedroom and loggia. They're decent enough to listen to music ocasionally. 3 Google Nest Hub This one is also a smart display. It can show receipts, timers, maps, youtube videos and more. I have one in the kitchen, it's ideal for cooking. Also nice to see the weather forecast for the whole week. It has a touch screen but I operate it only by voice 95% of the time. 1","title":"Google Home"},{"location":"software/home-assistant/","text":"Home Assistant is the brains of the whole operation. It controls all my smart devices and it provides a bit of an integration layer to connect everything to the Google Home and Apple Homekit ecosystems. Configuration \u00b6 Home Assistant is configured over its UI and a set of .yaml configuration files. Most of my configuration is checked in here . The entry point of the configuration is the configuration.yaml file at the root of the repository. To keep the configuration easier to maintain and read I've split off several sub configurations. You can recognize those by the !include example.yaml instructions in the main configuration.yaml. Passwords, auth tokens and other secrets are stored in a secrets.yaml file that is not checked in. You can recognize those by the !secret id instructions in the configuration. Screens \u00b6 Overview \u00b6 This screen I use 90% of the time. Most devices are controllable from the mini map \"Apartment Status\". Lights and basic devices will just turn on/off when clicked, other devices such as the blinds open a modal window to change detailed settings. Media Remote Control \u00b6 The remote control screen is meant to be used from the phone if I can't find the actual physical remote control ;-). It uses a logitech harmony IR blaster since most tv settings can't be reliably changed over their web apis. Back when I bought this TV it wasn't yet a requirement that it had to have a good api for automation :P. Z\u00fcri Webcams \u00b6 Some public webcams in various places around Zurich. I quite like this screen as it gives me a quick overview of what's happening in the city. Living Room \u00b6 I rarely use the individual room screens, mostly just if a device is misbehaving. Loggia \u00b6 Bedroom \u00b6 Bathroom \u00b6 Tech & Analytics \u00b6 This screen has been a bit neglected for a while. Ultimately it should display warnings if the battery of sensors goes below a certain threshold and other monitoring things like that. Addons \u00b6 Home Assistant can be extended with addons. I'm currently using the following: Name Description Repo AirCast Creates virtual AirPlay devices for Chromecast devices Community Add-on Duck DNS Automatically update your Duck DNS IP address with integrated HTTPS support via Let's Encrypt. Official Add-on Glances Shows CPU, RAM etc. usage Community Add-on MariaDB An SQL database server. Used as a replacement for the default SQLite DB. Official Add-on Mosquitto broker An Open Source MQTT broker. Used to connect to devices over MQTT. Official Add-on Node-RED Flow-based programming for the Internet of Things. Used for all sorts of automations Community Add-on Portainer Portainer is an open-source lightweight management UI which allows you to easily manage a Docker host(s) or Docker swarm clusters. Community Add-on Visual Studio Code This add-on runs Visual Studio Code, allowing you to edit your Home Assistant configuration directly from your web browser. Community Add-on deCONZ Control a Zigbee network using ConBee or RaspBee hardware by Dresden Elektronik. Official Add-on Home Assistant Google Drive Backup Creates regular backups of Home Assistant & Addons and uploads them to Google Drive. It uses the regular Home Assistant snapshot functionality and snapshots can be encrypted if you don't trust Google. Third-Party Add-on Influx A time-series database. I use it to store long-term data that I want to keep. E.g. various fitness metrics, account balances etc. Community Add-on Grafana An analytics and visualization platform. I used it to visualize long-term data that I store in InfluxDB. Community Add-on","title":"Home Assistant"},{"location":"software/home-assistant/#configuration","text":"Home Assistant is configured over its UI and a set of .yaml configuration files. Most of my configuration is checked in here . The entry point of the configuration is the configuration.yaml file at the root of the repository. To keep the configuration easier to maintain and read I've split off several sub configurations. You can recognize those by the !include example.yaml instructions in the main configuration.yaml. Passwords, auth tokens and other secrets are stored in a secrets.yaml file that is not checked in. You can recognize those by the !secret id instructions in the configuration.","title":"Configuration"},{"location":"software/home-assistant/#screens","text":"","title":"Screens"},{"location":"software/home-assistant/#overview","text":"This screen I use 90% of the time. Most devices are controllable from the mini map \"Apartment Status\". Lights and basic devices will just turn on/off when clicked, other devices such as the blinds open a modal window to change detailed settings.","title":"Overview"},{"location":"software/home-assistant/#media-remote-control","text":"The remote control screen is meant to be used from the phone if I can't find the actual physical remote control ;-). It uses a logitech harmony IR blaster since most tv settings can't be reliably changed over their web apis. Back when I bought this TV it wasn't yet a requirement that it had to have a good api for automation :P.","title":"Media Remote Control"},{"location":"software/home-assistant/#zuri-webcams","text":"Some public webcams in various places around Zurich. I quite like this screen as it gives me a quick overview of what's happening in the city.","title":"Z\u00fcri Webcams"},{"location":"software/home-assistant/#living-room","text":"I rarely use the individual room screens, mostly just if a device is misbehaving.","title":"Living Room"},{"location":"software/home-assistant/#loggia","text":"","title":"Loggia"},{"location":"software/home-assistant/#bedroom","text":"","title":"Bedroom"},{"location":"software/home-assistant/#bathroom","text":"","title":"Bathroom"},{"location":"software/home-assistant/#tech-analytics","text":"This screen has been a bit neglected for a while. Ultimately it should display warnings if the battery of sensors goes below a certain threshold and other monitoring things like that.","title":"Tech &amp; Analytics"},{"location":"software/home-assistant/#addons","text":"Home Assistant can be extended with addons. I'm currently using the following: Name Description Repo AirCast Creates virtual AirPlay devices for Chromecast devices Community Add-on Duck DNS Automatically update your Duck DNS IP address with integrated HTTPS support via Let's Encrypt. Official Add-on Glances Shows CPU, RAM etc. usage Community Add-on MariaDB An SQL database server. Used as a replacement for the default SQLite DB. Official Add-on Mosquitto broker An Open Source MQTT broker. Used to connect to devices over MQTT. Official Add-on Node-RED Flow-based programming for the Internet of Things. Used for all sorts of automations Community Add-on Portainer Portainer is an open-source lightweight management UI which allows you to easily manage a Docker host(s) or Docker swarm clusters. Community Add-on Visual Studio Code This add-on runs Visual Studio Code, allowing you to edit your Home Assistant configuration directly from your web browser. Community Add-on deCONZ Control a Zigbee network using ConBee or RaspBee hardware by Dresden Elektronik. Official Add-on Home Assistant Google Drive Backup Creates regular backups of Home Assistant & Addons and uploads them to Google Drive. It uses the regular Home Assistant snapshot functionality and snapshots can be encrypted if you don't trust Google. Third-Party Add-on Influx A time-series database. I use it to store long-term data that I want to keep. E.g. various fitness metrics, account balances etc. Community Add-on Grafana An analytics and visualization platform. I used it to visualize long-term data that I store in InfluxDB. Community Add-on","title":"Addons"},{"location":"software/overview/","text":"Software \u00b6 This is a bit of a general overview over all the software I use. It's not strictly limited to only Smart Home stuff since it's hard to draw a clear line. Home Automation \u00b6 Home Assistant \u00b6 Home Assistant is the core of my smart home setup. It's an open source home automation software written in Python that runs locally on a computer as small as a Raspberry Pi or as powerful as the user desires. At the time of me writing this it supports over 1500 integrations with various smart home devices & services. It is actively developed and has a regular release cycle of 3 weeks. Updates are frequent and of good quality. I'm running my Home Assistant instance on a Intel NUC in supervised mode. This means I provide my own OS of choice (Ubuntu) and Home Assistant runs a supervisor software on top that manages the docker containers used by itself and addons. Node-RED \u00b6 Node-RED is a programming tool for wiring together hardware devices, APIs and online services. It provides a web-editor that makes it easy to wire together flows using a wide range of nodes. Changes can be deployed with a single-click. Node-RED was originally developed by IBM but has since been contributed to the open source JS Foundation project. I run Node-RED as a addon in Home Assistant and I use it to create & run a ton of simple and complicated automations. Some of my favorite automations are: only starting the cleaning robot when I'm not home, reminding me that the washing machine has finished with a push notification & google home announcement, and operating various lights fully automatically. Visual Studio Code \u00b6 Visual Studio Code is an awesome IDE in it's own right. However I also run it as a Home Assistant Addon in order to edit all those .yaml configuration files. What's especially cool is that it has a full integration with Home Assistant, so there's even autocompletion for all the device entities managed by Home Assistant. Documentation \u00b6 MkDocs \u00b6 This page is made with MkDocs . It's a static site generator that's geared towards building project documentation. The source files are written in Markdown and configured with a single .yaml configuration file. I host my smart home documentation on Github pages. SaaS \u00b6 Software as a service.. or cloud stuff that I use :) Exist \u00b6 Exist combines the data of various sources (Apple Health, RescueTime, Weather .. etc.) to help you understand what makes you more happy, productive, active etc. This data is already being collected by other entities.. so it's interesting to have it for yourself and draw your own conclusions. I've made some automations in home assistant to automatically log the time spent gaming or watching tv to Exist.io. 1Password \u00b6 The password manager of my choice. Apart from storing passwords it has a few features that I really like. It has a scanner that detects weak, vulnerable or duplicate passwords and allows you to easily change them. And it can store 2FA pins in addition to passwords. This is a lot better than with Google Authenticator where you'd need to reset all your 2FA pins every time you set up a new phone.","title":"Overview"},{"location":"software/overview/#software","text":"This is a bit of a general overview over all the software I use. It's not strictly limited to only Smart Home stuff since it's hard to draw a clear line.","title":"Software"},{"location":"software/overview/#home-automation","text":"","title":"Home Automation"},{"location":"software/overview/#home-assistant","text":"Home Assistant is the core of my smart home setup. It's an open source home automation software written in Python that runs locally on a computer as small as a Raspberry Pi or as powerful as the user desires. At the time of me writing this it supports over 1500 integrations with various smart home devices & services. It is actively developed and has a regular release cycle of 3 weeks. Updates are frequent and of good quality. I'm running my Home Assistant instance on a Intel NUC in supervised mode. This means I provide my own OS of choice (Ubuntu) and Home Assistant runs a supervisor software on top that manages the docker containers used by itself and addons.","title":"Home Assistant"},{"location":"software/overview/#node-red","text":"Node-RED is a programming tool for wiring together hardware devices, APIs and online services. It provides a web-editor that makes it easy to wire together flows using a wide range of nodes. Changes can be deployed with a single-click. Node-RED was originally developed by IBM but has since been contributed to the open source JS Foundation project. I run Node-RED as a addon in Home Assistant and I use it to create & run a ton of simple and complicated automations. Some of my favorite automations are: only starting the cleaning robot when I'm not home, reminding me that the washing machine has finished with a push notification & google home announcement, and operating various lights fully automatically.","title":"Node-RED"},{"location":"software/overview/#visual-studio-code","text":"Visual Studio Code is an awesome IDE in it's own right. However I also run it as a Home Assistant Addon in order to edit all those .yaml configuration files. What's especially cool is that it has a full integration with Home Assistant, so there's even autocompletion for all the device entities managed by Home Assistant.","title":"Visual Studio Code"},{"location":"software/overview/#documentation","text":"","title":"Documentation"},{"location":"software/overview/#mkdocs","text":"This page is made with MkDocs . It's a static site generator that's geared towards building project documentation. The source files are written in Markdown and configured with a single .yaml configuration file. I host my smart home documentation on Github pages.","title":"MkDocs"},{"location":"software/overview/#saas","text":"Software as a service.. or cloud stuff that I use :)","title":"SaaS"},{"location":"software/overview/#exist","text":"Exist combines the data of various sources (Apple Health, RescueTime, Weather .. etc.) to help you understand what makes you more happy, productive, active etc. This data is already being collected by other entities.. so it's interesting to have it for yourself and draw your own conclusions. I've made some automations in home assistant to automatically log the time spent gaming or watching tv to Exist.io.","title":"Exist"},{"location":"software/overview/#1password","text":"The password manager of my choice. Apart from storing passwords it has a few features that I really like. It has a scanner that detects weak, vulnerable or duplicate passwords and allows you to easily change them. And it can store 2FA pins in addition to passwords. This is a lot better than with Google Authenticator where you'd need to reset all your 2FA pins every time you set up a new phone.","title":"1Password"},{"location":"software/knx/","text":"KNX Blinds Configuration \u00b6 The apartment that I'm renting has blinds that can be raised and lowered electronically. They're controlled over a \"Griesser MGX-9 Motorsteuerung\" (actor controller). The controlled communicates with the building's central control unit over KNX . KNX is an open standard for building automation. Some of the rules that cause the building to control the blinds are: Direct sunlight on the side of the building at specific times (e.g. 8am, 9am) cause it to lower the blinds Strong winds cause it to raise the blinds and lock them for some time (idk how long) Manual central controls for maintenance, e.g. window cleaning, blinds maintenance etc. I have no issue with the second and third rule, but I dislike it when the blinds are closed for sunlight reasons. My main problem is that I go to work early in the morning and the building closes the blinds by 8am. This means that my plants are now in relative darkness until I get home at which point it might already by dark outside again. But even when I'm home it's a bit annoying to have to get up and open the blinds again when the building decides it's time to lower them. So here's my setup for controlling these blinds via Home Assistant: Communication \u00b6 I use a KNX IP Interface 731 connected to the controller via KNX TP (twisted pair). The KNX IP interface has an ethernet socket and is plugged into my LAN. I've assigned it a fixed IPv4 IP. ETS5 Professional \u00b6 Via the KNX IP Interface and a software called ETS5 Professional it's possible to overwrite the configuration on the KNX controller. ETS5 can be downloaded for free as a demo version with full functionality for up to 5 projects. Since ETS5 is only released for Windows I've been using it on a Parallels VM. Warning Beware, the existing configuration cannot be downloaded and changed. It's only possible to write an entirely new configuration onto the controller. The only way to keep the existing configuration is if you can get a hold of the configuration file from whoever set up the controller in the first place. If you're renting it can be a bit of a hassle to get the original configuration from a technician. KNX Configuration \u00b6 So in order to control the blinds via Home Assistant what we need to do is assign group addresses. Over these address the blinds can then be controlled. Group Addresses \u00b6 It's a good idea to invent some sort of system when assigning addresses so that it will be easier to remember which address does what when configuring them in Home Assistant. Info A KNX group address has a data length of 16bit and consists of 3 parts: main/middle/sub I've decided on the following scheme for my blinds: prefix/blind/function Function addresses \u00b6 Function Value Length Data Type Address Read Position 0-255 1 byte percentage (0-100%) 233 Step Step/Stop 1 bit switch 232 Set Position 0-255 1 byte percentage (0-100%) 231 Up/Down Up/Down 1 bit up/down 230 Address list \u00b6 Function Blind Address Read Position Loggia 22/1/233 Read Position Living Room 22/2/233 Step Loggia 22/1/232 Step Living Room 22/2/232 Set Position Loggia 22/1/231 Set Position Living Room 22/2/231 Up/Down Loggia 22/1/230 Up/Down Living Room 22/1/230 In order to control multiple blinds at the same time you simply assign them the same address. E.g. for me the loggia and living room blinds consist of each 3 blinds. But since I don't want to control those individually I simply assign the three living room blinds the same address for each function. Home Assistant configuration \u00b6 The setup within Home Assistant is fairly simple. First you have to configure the KNX IP interface as seen below: knx : tunneling : host : '192.168.178.71' # the IP of the KNX interface port : 3671 fire_event : true fire_event_filter : [ \"22/1-2/*\" ] # Only listen to events from my blinds Info Beware that the KNX IP interface may have a limit for how many computers it can be connected to at the same time. Mine only supports one computer, so I needed to disconnect ETS5 before restarting Home Assistant. Then you have to setup the devices that should be controlled. For me these are my two blinds: cover : - platform : knx name : \"Loggia\" move_long_address : '22/1/230' # Up/Down function move_short_address : '22/1/232' # Step function position_address : '22/1/231' # Position function position_state_address : '22/1/233' # Read Position function travelling_time_down : 24 travelling_time_up : 24 - platform : knx name : \"Livingroom\" move_long_address : '22/2/230' # Up/Down function move_short_address : '22/2/232' # Step function position_address : '22/2/231' # Position function position_state_address : '22/2/233' # Read Position function travelling_time_down : 24 travelling_time_up : 24 That's it, after a restart the blinds can be added to your lovelace UI.","title":"KNX"},{"location":"software/knx/#knx-blinds-configuration","text":"The apartment that I'm renting has blinds that can be raised and lowered electronically. They're controlled over a \"Griesser MGX-9 Motorsteuerung\" (actor controller). The controlled communicates with the building's central control unit over KNX . KNX is an open standard for building automation. Some of the rules that cause the building to control the blinds are: Direct sunlight on the side of the building at specific times (e.g. 8am, 9am) cause it to lower the blinds Strong winds cause it to raise the blinds and lock them for some time (idk how long) Manual central controls for maintenance, e.g. window cleaning, blinds maintenance etc. I have no issue with the second and third rule, but I dislike it when the blinds are closed for sunlight reasons. My main problem is that I go to work early in the morning and the building closes the blinds by 8am. This means that my plants are now in relative darkness until I get home at which point it might already by dark outside again. But even when I'm home it's a bit annoying to have to get up and open the blinds again when the building decides it's time to lower them. So here's my setup for controlling these blinds via Home Assistant:","title":"KNX Blinds Configuration"},{"location":"software/knx/#communication","text":"I use a KNX IP Interface 731 connected to the controller via KNX TP (twisted pair). The KNX IP interface has an ethernet socket and is plugged into my LAN. I've assigned it a fixed IPv4 IP.","title":"Communication"},{"location":"software/knx/#ets5-professional","text":"Via the KNX IP Interface and a software called ETS5 Professional it's possible to overwrite the configuration on the KNX controller. ETS5 can be downloaded for free as a demo version with full functionality for up to 5 projects. Since ETS5 is only released for Windows I've been using it on a Parallels VM. Warning Beware, the existing configuration cannot be downloaded and changed. It's only possible to write an entirely new configuration onto the controller. The only way to keep the existing configuration is if you can get a hold of the configuration file from whoever set up the controller in the first place. If you're renting it can be a bit of a hassle to get the original configuration from a technician.","title":"ETS5 Professional"},{"location":"software/knx/#knx-configuration","text":"So in order to control the blinds via Home Assistant what we need to do is assign group addresses. Over these address the blinds can then be controlled.","title":"KNX Configuration"},{"location":"software/knx/#group-addresses","text":"It's a good idea to invent some sort of system when assigning addresses so that it will be easier to remember which address does what when configuring them in Home Assistant. Info A KNX group address has a data length of 16bit and consists of 3 parts: main/middle/sub I've decided on the following scheme for my blinds: prefix/blind/function","title":"Group Addresses"},{"location":"software/knx/#function-addresses","text":"Function Value Length Data Type Address Read Position 0-255 1 byte percentage (0-100%) 233 Step Step/Stop 1 bit switch 232 Set Position 0-255 1 byte percentage (0-100%) 231 Up/Down Up/Down 1 bit up/down 230","title":"Function addresses"},{"location":"software/knx/#address-list","text":"Function Blind Address Read Position Loggia 22/1/233 Read Position Living Room 22/2/233 Step Loggia 22/1/232 Step Living Room 22/2/232 Set Position Loggia 22/1/231 Set Position Living Room 22/2/231 Up/Down Loggia 22/1/230 Up/Down Living Room 22/1/230 In order to control multiple blinds at the same time you simply assign them the same address. E.g. for me the loggia and living room blinds consist of each 3 blinds. But since I don't want to control those individually I simply assign the three living room blinds the same address for each function.","title":"Address list"},{"location":"software/knx/#home-assistant-configuration","text":"The setup within Home Assistant is fairly simple. First you have to configure the KNX IP interface as seen below: knx : tunneling : host : '192.168.178.71' # the IP of the KNX interface port : 3671 fire_event : true fire_event_filter : [ \"22/1-2/*\" ] # Only listen to events from my blinds Info Beware that the KNX IP interface may have a limit for how many computers it can be connected to at the same time. Mine only supports one computer, so I needed to disconnect ETS5 before restarting Home Assistant. Then you have to setup the devices that should be controlled. For me these are my two blinds: cover : - platform : knx name : \"Loggia\" move_long_address : '22/1/230' # Up/Down function move_short_address : '22/1/232' # Step function position_address : '22/1/231' # Position function position_state_address : '22/1/233' # Read Position function travelling_time_down : 24 travelling_time_up : 24 - platform : knx name : \"Livingroom\" move_long_address : '22/2/230' # Up/Down function move_short_address : '22/2/232' # Step function position_address : '22/2/231' # Position function position_state_address : '22/2/233' # Read Position function travelling_time_down : 24 travelling_time_up : 24 That's it, after a restart the blinds can be added to your lovelace UI.","title":"Home Assistant configuration"},{"location":"software/node-red/","text":"I use a Home Assistant addon called \"Node-RED\" for most of my automations. Node-RED is a low-code programming tool for wiring together hardware devices, APIs and online services. It was originally developed by IBM and is now part of the OpenJS Foundation . It can also be used standalone, e.g. without Home Assistant. But when used as a Home Assistant addon you automatically gain access to all devices, services etc. that are known to Home Assistant. This makes it really easy to wire together useful automations. Node-RED configuration \u00b6 Node-RED is configured in it's UI. The resulting configuration is stored in a \"node-red\" folder . Although it can be checked in it's not really meant to be human-readable or editable outside of Node-RED. Why use Node-RED over the Home Assistant built-in automation features? \u00b6 These days pretty much everything that can be done in Node-RED could also be created as a native Home Assistant automation. However personally I still prefer Node-RED for the following reasons: Easy debugging: with Node-RED you can simply attach a debug node and see exactly where the automations fails. Logs are immediately visible and can be restricted to the automation you're trying to debug. Fast re-deployment: Re-deploying all automations is just a button click away and takes between 2-3seconds. All automations and their components are visible at once and can easily be interconnected and copy&pasted for re-use. The downside of using Node-RED is that the resulting configuration is not really human-readable and sharing automations is not exactly easy.","title":"Node-RED"},{"location":"software/node-red/#node-red-configuration","text":"Node-RED is configured in it's UI. The resulting configuration is stored in a \"node-red\" folder . Although it can be checked in it's not really meant to be human-readable or editable outside of Node-RED.","title":"Node-RED configuration"},{"location":"software/node-red/#why-use-node-red-over-the-home-assistant-built-in-automation-features","text":"These days pretty much everything that can be done in Node-RED could also be created as a native Home Assistant automation. However personally I still prefer Node-RED for the following reasons: Easy debugging: with Node-RED you can simply attach a debug node and see exactly where the automations fails. Logs are immediately visible and can be restricted to the automation you're trying to debug. Fast re-deployment: Re-deploying all automations is just a button click away and takes between 2-3seconds. All automations and their components are visible at once and can easily be interconnected and copy&pasted for re-use. The downside of using Node-RED is that the resulting configuration is not really human-readable and sharing automations is not exactly easy.","title":"Why use Node-RED over the Home Assistant built-in automation features?"}]}